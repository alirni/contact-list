<link rel="import" href="../bower_components/polymer/polymer.html" />
<link rel="import" href="my-icons.html" />
<link rel="import" href="shared-styles.html" />
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html" />
<link rel="import" href="contact-circle.html" />
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html" />
<link rel="import" href="../bower_components/paper-styles/typography.html" />
<link rel="import" href="../bower_components/paper-menu/paper-menu.html" />
<link rel="import" href="../bower_components/paper-menu-button/paper-menu-button.html" />
<link rel="import" href="../bower_components/paper-item/paper-item.html" />
<link rel="import" href="more-vert-menu.html" />
<link rel="import" href="contact-name.html" />
<link rel="import" href="contact-detalis.html" />
<link rel="import" href="../bower_components/paper-dialog-scrollable/paper-dialog-scrollable.html" />
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html" />


<dom-module id="contact-list-item">
	<template>
		
		<style include="shared-styles">
			:host {
      	display: block;
      }

			.flex-horizontal {
				@apply(--layout-horizontal);
			}

			.flexchild {
				@apply(--layout-flex);
			}

			.mobile {
				@apply(--paper-font-caption);
			}

			.name {
				text-transform: capitalize;
			}

    </style>

    <app-location route="{{route}}"></app-location>
    <app-route
        route="{{route}}"
        pattern="/:page"
        data="{{routeData}}"
        tail="{{subroute}}"></app-route>

    <div class="cards flex-horizontal">
      <contact-circle></contact-circle>
      <a class="flexchild" name="contact-detalis" href="/contact-detalis" tabindex="1">
        <contact-name></contact-name>
      </a>
      <more-vert-menu></more-vert-menu>
    </div>


  <!--<paper-dialog id="dialog">
    <paper-dialog-scrollable>
      <contact-detalis></contact-detalis>
    </paper-dialog-scrollable>
  </paper-dialog>-->

  <iron-pages
      selected="[[page]]"
      attr-for-selected="name"
      fallback-selection="view404"
      role="main">
    <contact-detalis name="contact-view"></contact-detalis>
  </iron-pages>

  </template>
    
  <script>
		Polymer ({
			is: 'contact-list-item',

      properties: {
        page: {
          type: String,
          reflectToAttribute: true,
          observer: '_pageChanged'
        }
      },

      observers: [
        '_routePageChanged(routeData.page)'
      ],

      _routePageChanged: function(page) {
        this.page = page || 'contact-view';
      },

      _pageChanged: function(page) {
        // Load page import on demand. Show 404 page if fails
        var resolvedPageUrl = this.resolveUrl(page + '.html');
        this.importHref(resolvedPageUrl, null, this._showPage404, true);
      },


		});
	</script>
</dom-module>